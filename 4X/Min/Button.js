/*!
ARIA Button Module 1.0 for Apex 4X
Copyright 2021 Bryan Garaventa (WhatSock.com)
https://github.com/whatsock/apex
Apex 4X is distributed under the terms of the Open Source Initiative OSI - MIT License.
*/
"setButton"in $A||$A.import("RovingTabIndex",{name:"ButtonModule",props:props,once:!0,call:function(e){$A.extend({setButton:function(e,d){function l(i,e,t,r,s){if(t){var a=$A.getAttr(i,"role"),A="radio"===a,o="switch"===a,n=$A.hasAttr(i,"aria-pressed"),c=0;return"true"===e?c=1:A||n||o||"mixed"!==e?e="false":c=2,$A.data(i,"check",c),r&&(A&&$A.isArray(s)&&$A.loop(s,function(e,t){t!==i&&$A.setAttr(t,"aria-checked","false")},"array"),$A.setAttr(i,n?"aria-pressed":"aria-checked",e),"mixed"===e?($A.remClass(i,d.toggleClassName||"pressed checked"),$A.toggleClass(i,d.partialClassName||"partially-checked",!0)):($A.remClass(i,d.partialClassName||"partially-checked"),$A.toggleClass(i,d.toggleClassName||(n?"pressed":"checked"),"true"===e))),c}return!1}this._4X&&(d=e,e=this._X),$A.isPlainObject(e)&&(e=(d=e).trigger||null);var u=[];if($A.query(e,d.context||document,function(e,t){var i=$A.isNode(t)&&($A.hasAttr(t,"controls")&&$A.morph($A.getAttr(t,"controls"))||$A.isFn(t.querySelector)&&t.querySelector("input"))||!1,n=$A.isNative(i)?i:$A.isNative(t)?t:null,r=$A.isNode(i)&&!$A.isNative(i)?i:$A.isNative(t)?null:t,A=!$A.isNode(n)&&$A.isNode(i)&&r!==t?i:null;if(A===r&&(r=t),$A.remAttr([t,r,n,A],"controls"),$A.isNode(r)){$A.isNode(n)&&$A.isNode(r)&&$A.bindObjects(n,r);var s=l(r,$A.getAttr(r,"radio"),$A.hasAttr(r,"radio")),a=l(r,$A.getAttr(r,"check"),$A.hasAttr(r,"check")),o=l(r,$A.getAttr(r,"toggle"),$A.hasAttr(r,"toggle")),c=l(r,$A.getAttr(r,"switch"),$A.hasAttr(r,"switch"));if($A.isNum(s))$A.setAttr(r,{role:"radio","aria-checked":s?"true":"false"}),u.push(r);else if($A.isNum(a)||$A.isNum(c)){$A.isNode(n)&&n.checked&&(a=1),$A.isNode(A)&&(A.id||(A.id=$A.genId()),$A.setAttr(r,{"aria-flowto":A.id,"aria-controls":A.id}));var $="false";1===a?$="true":$A.isNum(c)||2!==a||($="mixed"),$A.setKBA11Y(r,$A.isNum(c)?"switch":"checkbox",function(e,t){var i=this,r=$A.isDisabled(i),s=l(i,$A.getAttr(i,"aria-checked"),$A.hasAttr(i,"aria-checked"));!r&&$A.isFn(d.onActivate)&&d.onActivate.apply(i,[e,i,t||n,s,function(e){l(i,e,!0,!0)}])}),$A.setAttr(r,{"aria-checked":$})}else!1!==o&&($A.setAttr(r,"aria-pressed",o?"true":"false"),$A.isNode(A)&&(A.id||(A.id=$A.genId()),$A.setAttr(r,{"aria-flowto":A.id,"aria-controls":A.id}))),$A.setKBA11Y(r,"button",function(e,t){var i=this,r=$A.isDisabled(i),s=l(i,$A.getAttr(i,"aria-pressed"),$A.hasAttr(i,"aria-pressed")),a=!1!==s?[e,i,t||A,s,function(e){l(i,e,!0,!0)}]:[e,i,t||A];!r&&$A.isFn(d.onActivate)&&d.onActivate.apply(i,a)});!1===s&&!1===a&&!1===o&&!1===c||$A.on(r,"attributeChange",function(e,t,i,r,s,a,A){if($A.isNode(n)){var o=l(t,r,!0);n.checked=!!o}},{attributeFilter:["aria-checked","aria-pressed"]}),$A.svgFix(r),$A.isNode(n)&&n.disabled&&$A.setAttr(r,"aria-disabled","true"),$A.updateDisabled(r),d.label&&$A.setAttr(r,"aria-label",d.label),($A.isNode(n)&&n.required||d.required)&&$A.setAttr(r,"aria-required","true")}$A.remAttr([t,r,n,A],["check","radio","switch","toggle"])}),u.length){var a=d.container&&$A.morph(d.container)||$A.closest(u[0],function(e){if("radiogroup"===$A.getAttr(e,"role"))return!0});$A.isNode(a)||function(e){var t=[],i=[];$A.closest(e[0],function(e){if($A.isNode(e)&&t.push(e),e===document.body)return!0}),$A.closest(e[e.length-1],function(e){if($A.isNode(e)&&i.push(e),e===document.body)return!0}),t=t.reverse(),i=i.reverse();for(var r=null,s=0;s<t.length;s++)if(t[s]===i[s])r=t[s];else if(t[s]!==i[s])break;a=r}(u),$A.setAttr(a,"role","radiogroup"),new $A.RovingTabIndex($A.extend({nodes:u,startIndex:0,orientation:0,autoLoop:!0,onClick:function(e,t,i,r){var s=t,a=$A.isDisabled(s),A=l(s,$A.getAttr(s,"aria-checked"),$A.hasAttr(s,"aria-checked"));!a&&$A.isFn(d.onActivate)&&d.onActivate.apply(s,[e,s,r,A,function(e){l(s,e,!0,!0,i.nodes)}])},onSpace:function(e,t,i,r){i.onClick.apply(t,arguments)},onFocus:function(e,t,i,r){i.arrowPressed&&!$A.isTouch&&i.onClick.apply(t,arguments)}},d.extendRTI||{}))}return $A._XR.call(this,e)}}),$A.extend({setCheckbox:$A.setButton,setRadio:$A.setButton,setSwitch:$A.setButton})}});