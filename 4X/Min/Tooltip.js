/*!
ARIA Tooltip Module 2.0 for Apex 4X
Copyright 2021 Bryan Garaventa (WhatSock.com)
https://github.com/whatsock/apex
Apex 4X is distributed under the terms of the Open Source Initiative OSI - MIT License.
*/
"setTooltip"in $A||($A.addWidgetProfile("Tooltip",{configure:function(e){return{delay:0,delayTimeout:0,isError:!1,isFocusOnly:!1,isResponsive:!1,isManualOpen:!1,isManualClose:!0,isAlert:!1,announce:!1,exposeBounds:!0,preload:!0,preloadImages:!0,preloadCSS:!0,className:"tooltip",allowRerender:!1,escToClose:!0,returnFocus:!1,mouseLeave:function(e,i){i.remove()},click:function(e,i){i.remove(),e.stopPropagation(),e.preventDefault()}}},role:function(e){return{role:"region","aria-label":e.isError&&!e.isResponsive?"Error":"Tooltip"}},innerRole:function(e){return{role:"tooltip"}},afterFetch:function(e,i){e.isError||e.isFocusOnly||e.isResponsive||e.isManualOpen||e.isAlert||e.isIE||(e.noRepeat=!0,$A.setAttr(e.target,"aria-description",$A.getText($A.morph(i))))},afterRender:function(e,i){e.isError||e.isResponsive||e.isIE?e.speak():e.noRepeat||$A.setAttr(e.target,"aria-describedby",i.id)},afterRemove:function(e,i){$A.remAttr(e.target,"aria-describedby")}}),$A.extend({setTooltip:function(e,a){if(this._4X&&(a=e,e=this._X),$A.isPlainObject(e)&&(e=(a=e).trigger||a.content||null),!e)return null;function l(t){return $A.extend({widgetType:"Tooltip",speak:function(e){var i=this;return e=e||i.text(),i.noRepeat||($A.announce.clear(),setTimeout(function(){$A.announce(e,i.suppressRepeat,i.isAlert)},1)),i},validate:function(e,i){if(!i.value)return e.isValid=!1,e.content;e.isValid=!0},validateCondition:function(e){if(!e.isError&&!e.isResponsive)return e;var i=e.validate(e,e.target)||!1;i&&!$A.isBool(i)&&(e.loaded&&e.speak(i),e.insert(i)),$A.isFn(e.onValid)&&e.onValid(e)},on:{focus:function(e,i){i.isError||i.isResponsive||i.isManualOpen||this!==t?(i.isError||i.isResponsive)&&(i.isError&&i.remove(),i.validate(i,i.target),$A.isFn(i.onValid)&&i.onValid(i)):i.render()},blur:function(e,i){i.isError?i.isResponsive||i.validateCondition(i):$A.isTouch||i.remove()},touchstart:function(e,i){i.isError||i.isResponsive||i.isManualOpen?(i.isError||i.isResponsive)&&(i.isError&&i.remove(),i.validate(i,i.target),$A.isFn(i.onValid)&&i.onValid(i)):i.render()},click:function(e,i){i.isError||!i.isManualOpen||i.loaded?!i.isError&&i.isManualOpen&&i.loaded&&(i.remove(),e.stopPropagation(),e.preventDefault()):(i.render(),e.stopPropagation(),e.preventDefault())},mouseenter:function(e,i){i.isError||i.isManualOpen||i.isFocusOnly||i.isResponsive||i.render()},mouseleave:function(e,i){i.isError||i.isManualClose||i.isFocusOnly||i.isResponsive||i.remove()},keyup:function(e,i){i.isResponsive&&i.target.value!==i.value?(i.value=i.target.value,i.validateCondition(i)):(i.isError||i.isResponsive)&&(i.validate(i,i.target),$A.isFn(i.onValid)&&i.onValid(i))},change:function(e,i){i.isResponsive&&i.target.value!==i.value?(i.value=i.target.value,i.validateCondition(i)):(i.isError||i.isResponsive)&&(i.validate(i,i.target),$A.isFn(i.onValid)&&i.onValid(i))}}},a||{})}(a=a||{}).isIE=$A.isIE();var u=[];return $A.query(e,a.context||document,function(e,i){var t=null,r=null,n=a.id||i.id||$A.genId();if(!a.isError&&a.isResponsive&&(a.isError=!0),$A.hasAttr(i,"tooltip")){var o=$A.getAttr(i,"tooltip");t={id:$A.hasDC(n)?$A.genId():n,target:i,trigger:i},$A.isPath(o)?t.fetch=$A.toFetch(o):t.content=$A.morph(o)}if($A.hasAttr(i,"error")){var s=$A.getAttr(i,"error");r={id:$A.hasDC(n)?$A.genId():n,target:i,trigger:i,isError:!0},$A.isPath(s)?r.fetch=$A.toFetch(s):r.content=$A.morph(s)}r&&u.push($A.toDC($A.extend(l(i),r))),t&&(u.push($A.toDC($A.extend(l(i),t))),!t.content||a.isFocusOnly||a.isError||a.isResponsive||a.isManualOpen||a.isAlert||a.isIE||$A.setAttr(i,"aria-description",$A.getText(t.content))),r||t||(u.push($A.toDC($A.extend(l(i),{id:$A.hasDC(n)?$A.genId():n,target:i,trigger:i}))),!a.content||a.isFocusOnly||a.isError||a.isResponsive||a.isManualOpen||a.isAlert||a.isIE||$A.setAttr(i,"aria-description",$A.getText($A.morph(a.content))))}),$A.remAttr(e,["controls","error","tooltip"]),1===u.length?u[0]:u}}));